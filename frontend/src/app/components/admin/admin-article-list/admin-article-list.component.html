<div class="admin-page">
  <div class="header-section mb-5">
    <div>
      <h1 class="text-3xl font-bold text-white mb-2">Gerenciar Artigos</h1>
      <p class="text-gray-400">Visualize e gerencie todos os artigos publicados.</p>
    </div>
    <button
      pButton
      label="Novo Artigo"
      icon="pi pi-plus"
      routerLink="new"
      class="custom-button-primary"
    ></button>
  </div>

  <div class="card p-0 overflow-hidden bg-dark-card border-gray-700">
    <p-table
      [value]="articles()"
      dataKey="slug"
      responsiveLayout="scroll"
      [tableStyle]="{ 'min-width': '50rem' }"
      styleClass="p-datatable-sm custom-table"
    >
      <ng-template pTemplate="header">
        <tr>
          <th class="text-gold">Título</th>
          <th class="text-gold">Data Publicação</th>
          <th class="text-gold">Status</th>
          <th class="text-gold text-right">Ações</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-article>
        <tr class="hover:bg-gray-800 transition-colors">
          <td class="text-white font-medium">{{ article.title }}</td>
          <td class="text-gray-300">{{ article.published_date | date : 'dd/MM/yyyy' }}</td>
          <td>
            <span [class]="'status-badge ' + (article.published ? 'published' : 'draft')">
              <i [class]="article.published ? 'pi pi-check-circle' : 'pi pi-file'"></i>
              {{ article.published ? 'Publicado' : 'Rascunho' }}
            </span>
          </td>
          <td class="text-right">
            <button
              pButton
              icon="pi pi-pencil"
              class="p-button-text p-button-rounded text-gold hover:bg-gray-700"
              [routerLink]="[article.slug]"
              pTooltip="Editar"
            ></button>
            <button
              pButton
              icon="pi pi-trash"
              class="p-button-text p-button-rounded text-red-400 hover:bg-gray-700"
              (click)="deleteArticle(article.slug)"
              pTooltip="Excluir"
            ></button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="4" class="text-center p-4 text-gray-400">
            Nenhum artigo encontrado. Clique em "Novo Artigo" para começar. @if (error()) {
            <div class="text-red-400 mt-2">Erro ao carregar: {{ error() }}</div>
            }
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
